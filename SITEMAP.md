# Dynamic Sitemap for Next.js Documentation

This documentation site includes a dynamic sitemap that automatically generates XML sitemaps based on your file structure and metadata.

## Features

- **Automatic Discovery**: Scans your `app/` directory for all `.mdx` and `.md` files
- **Metadata Integration**: Reads `_meta.js` files to get proper page titles
- **Smart Prioritization**: Assigns different priorities based on page importance
- **SEO Optimized**: Includes proper change frequencies and last modified dates
- **Robots.txt**: Automatically generated robots.txt file that references the sitemap

## How It Works

### Sitemap Generation (`app/sitemap.ts`)

The sitemap is automatically generated by Next.js when you build your site. It:

1. Recursively scans the `app/` directory
2. Reads `_meta.js` files for page titles and metadata
3. Converts file paths to URLs
4. Assigns priorities and change frequencies based on page importance
5. Generates a valid XML sitemap

### Robots.txt (`app/robots.ts`)

Automatically generates a `robots.txt` file that:

- Allows crawling of all pages
- Disallows crawling of API routes and build files
- References the sitemap location

## Priority Levels

The sitemap assigns different priorities to pages:

- **Priority 1.0**: Homepage and quick-start guide
- **Priority 0.9**: Get Started section pages
- **Priority 0.8**: AI Basics section pages
- **Priority 0.7**: Database section pages
- **Priority 0.6**: All other pages

## Change Frequencies

- **Daily**: Homepage and quick-start guide
- **Weekly**: All other pages

## Testing the Sitemap

You can test the sitemap generation locally:

```bash
npm run sitemap:test
```

This will show you:

- All discovered pages
- Their assigned priorities and change frequencies
- The final sitemap structure

## Environment Variables

Set the following environment variable to customize the base URL:

```bash
NEXT_PUBLIC_SITE_URL=https://your-domain.com
```

If not set, it defaults to `https://docs.incerto.in`.

## File Structure Requirements

For the sitemap to work properly:

1. **Documentation files**: Use `.mdx` or `.md` extensions
2. **Metadata files**: Use `_meta.js` files to define page titles
3. **Directory structure**: Follow Next.js App Router conventions

### Example `_meta.js` file:

```javascript
export default {
  "get-started": "Get Started",
  "quick-start": "Quick Start Guide",
  "AI-Basics": "AI Basics",
};
```

## Accessing the Sitemap

Once deployed, your sitemap will be available at:

- **Sitemap**: `https://your-domain.com/sitemap.xml`
- **Robots.txt**: `https://your-domain.com/robots.txt`

## SEO Benefits

- **Search Engine Discovery**: Helps search engines find all your pages
- **Crawl Efficiency**: Provides optimal crawling instructions
- **Page Importance**: Signals which pages are most important
- **Update Frequency**: Tells search engines how often to check for updates

## Customization

You can customize the sitemap by modifying `app/sitemap.ts`:

- Adjust priority levels for different sections
- Change change frequencies
- Add custom logic for specific pages
- Include additional metadata

## Troubleshooting

### Common Issues

1. **Missing pages**: Ensure files have `.mdx` or `.md` extensions
2. **Wrong URLs**: Check that your `NEXT_PUBLIC_SITE_URL` is set correctly
3. **Metadata not showing**: Verify `_meta.js` files are properly formatted

### Debugging

Run the test script to see what pages are being discovered:

```bash
npm run sitemap:test
```

This will show you exactly which files are being included and their generated URLs.
